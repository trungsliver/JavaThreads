======================= Deadlocks =======================

1. KhÃ¡i niá»‡m
    - Deadlock (báº¿ táº¯c) lÃ  hiá»‡n tÆ°á»£ng xáº£y ra khi hai hay nhiá»u thread bá»‹ cháº·n vÄ©nh viá»…n vÃ¬ chÃºng Ä‘ang chá» nhau giáº£i phÃ³ng tÃ i nguyÃªn.
    - VÃ­ dá»¥ kinh Ä‘iá»ƒn lÃ  hai thread Ä‘á»u cáº§n 2 tÃ i nguyÃªn (A vÃ  B) nhÆ°ng má»—i thread giá»¯ 1 cÃ¡i vÃ  Ä‘á»£i cÃ¡i cÃ²n láº¡i
        â†’ cáº£ hai khÃ´ng bao giá» tiáº¿p tá»¥c Ä‘Æ°á»£c.

2. CÃ¡ch phÃ¡t hiá»‡n deadlock
    -> âœ… Manual approach (PhÆ°Æ¡ng phÃ¡p thá»§ cÃ´ng):
        - Dá»±a vÃ o dáº¥u hiá»‡u chÆ°Æ¡ng trÃ¬nh bá»‹ treo hoáº·c cháº¡y mÃ£i khÃ´ng xong.
        - DÃ¹ng cÃ¡c cÃ´ng cá»¥ nhÆ°: Thread Dump, VisualVM, jConsole, jstack Ä‘á»ƒ quan sÃ¡t tráº¡ng thÃ¡i thread.
        - Náº¿u nhiá»u thread á»Ÿ tráº¡ng thÃ¡i `BLOCKED` vÃ  Ä‘ang chá» cÃ¹ng má»™t lock â†’ cÃ³ kháº£ nÄƒng bá»‹ deadlock.

    -> ğŸ§  Programmatic approach to detect deadlock (PhÆ°Æ¡ng phÃ¡p láº­p trÃ¬nh):
        - Java cung cáº¥p class `ThreadMXBean` Ä‘á»ƒ kiá»ƒm tra xem cÃ³ deadlock khÃ´ng.

3. CÃ¡ch phÃ²ng trÃ¡nh deadlock
    -> Use Timeouts:
        Sá»­ dá»¥ng `tryLock(timeout)` tá»« ReentrantLock Ä‘á»ƒ khÃ´ng chá» mÃ£i mÃ£i.

    -> Global ordering of locks:
        Quy Ä‘á»‹nh má»™t thá»© tá»± khi láº¥y lock. VD: luÃ´n láº¥y lock resource1 trÆ°á»›c rá»“i má»›i Ä‘áº¿n resource2.

    -> Avoid nesting of locks:
        Cá»‘ gáº¯ng trÃ¡nh viá»‡c má»™t thread giá»¯ nhiá»u lock cÃ¹ng lÃºc (nested locks).

    -> Use Thread safe alternatives:
        DÃ¹ng cÃ¡c cáº¥u trÃºc thread-safe cÃ³ sáºµn nhÆ°: `ConcurrentHashMap`, `BlockingQueue` thay vÃ¬ tá»± cÃ i Ä‘áº·t locking.

4. VÃ­ dá»¥ minh há»a
        - Äáº§u báº¿p A cáº§n dao vÃ  thá»›t Ä‘á»ƒ náº¥u Äƒn.
        - Äáº§u báº¿p B cáº§n thá»›t vÃ  dao.
        - A láº¥y dao, B láº¥y thá»›t. Cáº£ hai chá» nhau mÃ£i Ä‘á»ƒ cÃ³ dá»¥ng cá»¥ cÃ²n láº¡i
            â†’ KhÃ´ng ai náº¥u Ä‘Æ°á»£c â†’ Báº¿ táº¯c!
